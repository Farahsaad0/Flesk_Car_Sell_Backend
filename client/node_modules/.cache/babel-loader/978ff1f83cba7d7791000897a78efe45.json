{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\farah\\\\Desktop\\\\auth\\\\client\\\\src\\\\components\\\\Singup\\\\verificationPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\"; //import { useHistory } from \"react-router-dom\"; // Importation de useHistory depuis React Router\n\nimport styles from \"./styles.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst VerificationPage = _ref => {\n  _s();\n\n  let {\n    email,\n    onSuccess\n  } = _ref;\n  const [verificationCode, setVerificationCode] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [msg, setMsg] = useState(\"\");\n  const history = useHistory(); // Initialisation de l'objet history\n\n  const handleVerificationSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const url = \"http://localhost:8000/verify\";\n      const {\n        data: res\n      } = await axios.post(url, {\n        email,\n        verificationCode\n      });\n      setMsg(res.message);\n      onSuccess(); // Appel à la fonction onSuccess pour signaler la réussite de la vérification\n\n      history.push(\"/login\"); // Redirection vers la page de connexion après validation\n    } catch (error) {\n      setError(\"Code de vérification invalide.\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.signup_container,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.form_container,\n      onSubmit: handleVerificationSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"V\\xE9rification de l'email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Code de v\\xE9rification\",\n        name: \"verificationCode\",\n        onChange: e => setVerificationCode(e.target.value),\n        value: verificationCode,\n        required: true,\n        className: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.error_msg,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 19\n      }, this), msg && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.success_msg,\n        children: msg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: styles.green_btn,\n        children: \"Valider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n};\n\n_s(VerificationPage, \"F2mcgJ5vtMvLSDmyYUOpdI+aWOE=\", true);\n\n_c = VerificationPage;\nexport default VerificationPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"VerificationPage\");","map":{"version":3,"sources":["C:/Users/farah/Desktop/auth/client/src/components/Singup/verificationPage.js"],"names":["React","useState","axios","styles","VerificationPage","email","onSuccess","verificationCode","setVerificationCode","error","setError","msg","setMsg","history","useHistory","handleVerificationSubmit","e","preventDefault","url","data","res","post","message","push","signup_container","form_container","target","value","input","error_msg","success_msg","green_btn"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;;AAGA,MAAMC,gBAAgB,GAAG,QAA0B;AAAA;;AAAA,MAAzB;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAyB;AACjD,QAAM,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0CP,QAAQ,CAAC,EAAD,CAAxD;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACU,GAAD,EAAMC,MAAN,IAAgBX,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAMY,OAAO,GAAGC,UAAU,EAA1B,CAJiD,CAInB;;AAE9B,QAAMC,wBAAwB,GAAG,MAAOC,CAAP,IAAa;AAC5CA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAI;AACF,YAAMC,GAAG,GAAG,8BAAZ;AACA,YAAM;AAAEC,QAAAA,IAAI,EAAEC;AAAR,UAAgB,MAAMlB,KAAK,CAACmB,IAAN,CAAWH,GAAX,EAAgB;AAC1Cb,QAAAA,KAD0C;AAE1CE,QAAAA;AAF0C,OAAhB,CAA5B;AAIAK,MAAAA,MAAM,CAACQ,GAAG,CAACE,OAAL,CAAN;AACAhB,MAAAA,SAAS,GAPP,CAOW;;AACbO,MAAAA,OAAO,CAACU,IAAR,CAAa,QAAb,EARE,CAQsB;AACzB,KATD,CASE,OAAOd,KAAP,EAAc;AACdC,MAAAA,QAAQ,CAAC,gCAAD,CAAR;AACD;AACF,GAdD;;AAgBA,sBACE;AAAK,IAAA,SAAS,EAAEP,MAAM,CAACqB,gBAAvB;AAAA,2BACE;AACE,MAAA,SAAS,EAAErB,MAAM,CAACsB,cADpB;AAEE,MAAA,QAAQ,EAAEV,wBAFZ;AAAA,8BAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,eAKE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,WAAW,EAAC,yBAFd;AAGE,QAAA,IAAI,EAAC,kBAHP;AAIE,QAAA,QAAQ,EAAGC,CAAD,IAAOR,mBAAmB,CAACQ,CAAC,CAACU,MAAF,CAASC,KAAV,CAJtC;AAKE,QAAA,KAAK,EAAEpB,gBALT;AAME,QAAA,QAAQ,MANV;AAOE,QAAA,SAAS,EAAEJ,MAAM,CAACyB;AAPpB;AAAA;AAAA;AAAA;AAAA,cALF,EAcGnB,KAAK,iBAAI;AAAK,QAAA,SAAS,EAAEN,MAAM,CAAC0B,SAAvB;AAAA,kBAAmCpB;AAAnC;AAAA;AAAA;AAAA;AAAA,cAdZ,EAeGE,GAAG,iBAAI;AAAK,QAAA,SAAS,EAAER,MAAM,CAAC2B,WAAvB;AAAA,kBAAqCnB;AAArC;AAAA;AAAA;AAAA;AAAA,cAfV,eAgBE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAER,MAAM,CAAC4B,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAhBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAwBD,CA9CD;;GAAM3B,gB;;KAAAA,gB;AAgDN,eAAeA,gBAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n//import { useHistory } from \"react-router-dom\"; // Importation de useHistory depuis React Router\r\nimport styles from \"./styles.module.css\";\r\n\r\n\r\nconst VerificationPage = ({ email, onSuccess }) => {\r\n  const [verificationCode, setVerificationCode] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [msg, setMsg] = useState(\"\");\r\n  const history = useHistory(); // Initialisation de l'objet history\r\n\r\n  const handleVerificationSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const url = \"http://localhost:8000/verify\";\r\n      const { data: res } = await axios.post(url, {\r\n        email,\r\n        verificationCode,\r\n      });\r\n      setMsg(res.message);\r\n      onSuccess(); // Appel à la fonction onSuccess pour signaler la réussite de la vérification\r\n      history.push(\"/login\"); // Redirection vers la page de connexion après validation\r\n    } catch (error) {\r\n      setError(\"Code de vérification invalide.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.signup_container}>\r\n      <form\r\n        className={styles.form_container}\r\n        onSubmit={handleVerificationSubmit}\r\n      >\r\n        <h1>Vérification de l'email</h1>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Code de vérification\"\r\n          name=\"verificationCode\"\r\n          onChange={(e) => setVerificationCode(e.target.value)}\r\n          value={verificationCode}\r\n          required\r\n          className={styles.input}\r\n        />\r\n        {error && <div className={styles.error_msg}>{error}</div>}\r\n        {msg && <div className={styles.success_msg}>{msg}</div>}\r\n        <button type=\"submit\" className={styles.green_btn}>\r\n          Valider\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VerificationPage;\r\n"]},"metadata":{},"sourceType":"module"}